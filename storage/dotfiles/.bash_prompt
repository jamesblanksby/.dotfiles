#!/usr/bin/env bash

RESET="\e[0m"

BLUE="\e[1;34m"
CYAN="\e[1;36m"
GOLD="\e[1;33m"
RUBY="\e[1;31m"

prompt_git() {
    local git=""
    if git status > /dev/null 2>&1; then
        git=$(echo -e "(${CYAN}$(git symbolic-ref --short -q HEAD 2> /dev/null)${RESET})")
    fi
    export PROMPT_GIT=$git
}

prompt_command() {
    prompt_git
}
PROMPT_COMMAND=prompt_command

PS1=""

if [[ "${USER}" == "root" ]]; then
    PS1+="\[${RUBY}\]\u\[${RESET}\]"
fi

if [[ "${USER}" == "root" ]] && [[ "${SSH_TTY}" ]]; then
    PS1+="\[${RUBY}\]@\[${RESET}\]"
fi

if [[ "${SSH_TTY}" ]]; then
    PS1+="\[${RUBY}\]\h\[${RESET}\]"
fi

PS1+="[\[${BLUE}\]\W\[${RESET}\]]"

PS1+=\$PROMPT_GIT

PS1+="\[${GOLD}\]\$\[${RESET}\] "
